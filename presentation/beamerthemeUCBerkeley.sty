% beamerthemeUCBerkeley.sty v1.1 (November 21, 2019)
% by Overleaf (LianTze Lim, Ryan Looney)
\ProvidesPackage{beamerthemeUCBerkeley}

\RequirePackage{silence}
\WarningsOff[mathdesign/mdbch]

\RequirePackage{etoolbox}
\setbeamertemplate{navigation symbols}{}
\setbeamertemplate{caption}[numbered]

% \RequirePackage[T1]{fontenc}
% \RequirePackage[charter,expert]{mathdesign}
% \RequirePackage[scaled=.96,oldstyle]{XCharter}
% \RequirePackage[default,scale=0.96,osfigures]{opensans}
\RequirePackage{fontspec}
%\setromanfont[Numbers=OldStyle]{Georgia}
%\setsansfont[Scale=MatchLowercase]{OpenSans}

\RequirePackage{tikz}

\definecolor{BerkeleyGold}{RGB}{193,129,45}
\definecolor{Medalist}{HTML}{C4820E}
\definecolor{BerkeleyBlueText}{RGB}{48,99,126}
\definecolor{FoundersRock}{HTML}{3B7EA1}
\definecolor{BerkeleyTableGold}{RGB}{222,157,46}
\definecolor{CaliforniaGold}{HTML}{FDB515}
\definecolor{BerkeleyTableBlue1}{RGB}{207,226,234}
\definecolor{BerkeleyTableBlue2}{RGB}{232,241,245}
\definecolor{BerkeleyBlue}{HTML}{003262}
\definecolor{Palatinate}{HTML}{72246C}

\setbeamertemplate{title page}[default][left]
\setbeamerfont{title}{family=\rmfamily,size=\Huge}
\setbeamerfont{author}{size=\Large}

\setbeamersize{text margin left=2em, text margin right=2em}

\setbeamertemplate{frametitle}{\vskip0.05\paperheight\insertframetitle} 
\setbeamerfont{frametitle}{family=\rmfamily,series=\mdseries,size=\LARGE}
\setbeamerfont{block title}{family=\rmfamily,size=\large}
\setbeamercolor{titlelike}{fg=BerkeleyBlue}
\setbeamercolor{normal text}{fg=BerkeleyBlue}
\setbeamercolor{structure}{fg=BerkeleyBlue}
\setbeamercolor{block title}{fg=BerkeleyBlue}
\setbeamercolor{section in head/foot}{bg=Palatinate}

\RequirePackage{pifont}
\setbeamertemplate{itemize item}{\ding{228}}
\setbeamertemplate{itemize subitem}{\ding{229}}
\setbeamertemplate{itemize subsubitem}{\ding{225}}
\setlength{\leftmargini}{1.25em}
\setlength{\leftmarginii}{1em}
\setlength{\leftmarginiii}{1em}

% \pgfdeclareimage[width=1.01\paperwidth]{blueslope}{blueslope}
\pgfdeclareimage[height=0.2\paperheight]{logo}{../images/Logo_WHITE.png}

\setbeamertemplate{background}{%
\begin{tikzpicture}[overlay,remember picture]
  \fill[Palatinate] (current page.south west) -- +(0, 0.18\paperheight) -- +(\paperwidth, 0.08\paperheight) -- (current page.south east) -- cycle;  
% \node[anchor=south west,inner sep=0pt,draw=none,yshift=-6pt,xshift=-1pt] at (current page.south west) {\pgfuseimage{blueslope}};%
\node[anchor=south west,inner sep=0pt,draw=none,xshift=0.015\paperheight,yshift=-0.025\paperheight] at (current page.south west) {\pgfuseimage{logo}};%
\node[anchor=south east,inner sep=0pt,draw=none,xshift=-10pt,yshift=8pt] at (current page.south east) {\color{White} Matthew Rossetter};
\end{tikzpicture}%
}

\setbeamertemplate{footline}{%
\vskip0.15\paperheight
}

\newcommand{\smallframetitle}{%
  \setbeamertemplate{frametitle}{\vskip0.15\paperheight\insertframetitle}
  \setbeamerfont{frametitle}{size=\large,series=\bfseries}
}
\newcommand{\normalframetitle}{%
  \setbeamertemplate{frametitle}{\vskip0.2\paperheight\insertframetitle} 
  \setbeamerfont{frametitle}{size=\LARGE,series=\mdseries}
}

\renewcommand{\arraystretch}{1.2}
\newcommand{\tableheadrow}{\rowcolor{BerkeleyTableGold}}
\newcommand{\tableheadcol}[1]{{\bfseries\color{white}#1}}
\rowcolors{2}{BerkeleyTableBlue1}{BerkeleyTableBlue2}
\AtBeginEnvironment{tabular}{\color{black}}

\setbeamercolor{secsubsec}{bg=Palatinate,fg=White}
\setbeamertemplate{headline}
{
  \leavevmode%
  \hbox{%
  \begin{beamercolorbox}[wd=\paperwidth,ht=8.25ex,dp=3.5ex]{secsubsec}%
    \raggedright
    \hspace*{2em}%
    {\large\color{White}\thesection.~\insertsection\hfill\insertsubsection}%
    \hspace*{2em}%
  \end{beamercolorbox}%
  }%
}
