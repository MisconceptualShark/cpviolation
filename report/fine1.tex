%NOTE: COMPILE IN TERMINAL USING LUALATEX
\documentclass[a4paper,11pt]{article}

\usepackage{tikz-feynman}
%\usetikzlibrary{external}             %% Load the `external` library
%\tikzexternalize
%\immediate\write18{mkdir -p pgf-img}
%\tikzexternalize[                     %% Activate externalization
%  system call={                       %% Use lualatex in system call
%    lualatex \tikzexternalcheckshellescape -halt-on-error -interaction=batchmode -jobname="\image" "\texsource" || rm "\image.pdf"
%  },
%]

\begin{document}

\feynmandiagram [layered layout, horizontal=a to b] {
    i1 -- [fermion,edge label=$q$] a -- [boson,edge label=$W^-$] b -- [anti fermion,edge label=$\bar{q}$] f1,
    i2 -- [anti fermion,edge label'=$\bar{b}$] c -- [boson,edge label'=$W^+$] d -- [fermion,edge label'=$b$] f2,
    {[same layer] a -- [fermion,edge label'=${u,c,t}$] c},
    {[same layer] b -- [fermion,edge label=${u,c,t}$] d},
    {[same layer] i1 -- [half left,looseness=0.3] i2},
    {[same layer] i1 -- [half right,looseness=0.3,edge label'=$B_q^0$] i2},
    {[same layer] f2 -- [half left,looseness=0.3] f1},
    {[same layer] f2 -- [half right,looseness=0.3,edge label'=$\bar{B}_q^0$] f1},
};
\feynmandiagram [layered layout, horizontal=a to b] {
    i1 -- [fermion,edge label=$q$] a -- [fermion,edge label=${u,c,t}$] b -- [fermion,edge label=$b$] f1,
    i2 -- [anti fermion,edge label'=$\bar{b}$] c -- [anti fermion,edge label'=${u,c,t}$] d -- [anti fermion,edge label'=$\bar{q}$] f2,
    {[same layer] a -- [boson,edge label'=$W^+$] c},
    {[same layer] b -- [boson,edge label=$W^-$] d},
    {[same layer] i1 -- [half left,looseness=0.3] i2},
    {[same layer] i1 -- [half right,looseness=0.3,edge label'=$B_q^0$] i2},
    {[same layer] f2 -- [half left,looseness=0.3] f1},
    {[same layer] f2 -- [half right,looseness=0.3,edge label'=$\bar{B}_q^0$] f1},
};

\feynmandiagram [layered layout, horizontal=a to b] {
    i1 -- [fermion,edge label=$q$] a -- [scalar,edge label=$H^-$] b -- [anti fermion,edge label=$\bar{q}$] f1,
    i2 -- [anti fermion,edge label'=$\bar{b}$] c -- [scalar,edge label'=$H^+$] d -- [fermion,edge label'=$b$] f2,
    {[same layer] a -- [fermion,edge label'=${u,c,t}$] c},
    {[same layer] b -- [fermion,edge label=${u,c,t}$] d},
    {[same layer] i1 -- [half left,looseness=0.3] i2},
    {[same layer] i1 -- [half right,looseness=0.3,edge label'=$B_q^0$] i2},
    {[same layer] f2 -- [half left,looseness=0.3] f1},
    {[same layer] f2 -- [half right,looseness=0.3,edge label'=$\bar{B}_q^0$] f1},
};
\feynmandiagram [layered layout, horizontal=a to b] {
    i1 -- [fermion,edge label=$q$] a -- [boson,edge label=$W^-$] b -- [anti fermion,edge label=$\bar{q}$] f1,
    i2 -- [anti fermion,edge label'=$\bar{b}$] c -- [scalar,edge label'=$H^+$] d -- [fermion,edge label'=$b$] f2,
    {[same layer] a -- [fermion,edge label'=${u,c,t}$] c},
    {[same layer] b -- [fermion,edge label=${u,c,t}$] d},
    {[same layer] i1 -- [half left,looseness=0.3] i2},
    {[same layer] i1 -- [half right,looseness=0.3,edge label'=$B_q^0$] i2},
    {[same layer] f2 -- [half left,looseness=0.3] f1},
    {[same layer] f2 -- [half right,looseness=0.3,edge label'=$\bar{B}_q^0$] f1},
};

%\begin{tikzpicture}
%    \begin{feynman}
%        \vertex (a1);
%        \vertex[below=2cm of a1] (a2);
%        \vertex[below right=1cm and 1cm of a1] (a3);
%        \vertex[right=2cm of a3] (a4);
%        \vertex[above right=1cm and 1cm of a4] (a5);
%        \vertex[below=2cm of a5] (a6);
%
%        \diagram* {
%            (a1) -- [fermion,edge label=$q_u$] (a3) -- [scalar,edge label'=$H^\pm$] (a4) -- [fermion,edge label=$l$] (a5),
%            (a2) -- [fermion,edge label'=$q_d$] (a3),
%            (a4) -- [fermion,edge label'=$\bar{\nu}_l$] (a6),
%            (a1) -- [half left,looseness=0.3] (a2),
%            (a1) -- [half right,looseness=0.3] (a2),
%        };
%    \end{feynman}
%\end{tikzpicture}



\end{document}
